{% extends "base.html" %}

{% block content %}

<h2>Update Your Profile</h2>

<form method="POST" action="{% url 'update-info' %}" enctype="multipart/form-data">
    {% csrf_token %}

    <!-- Username -->
    <label for="uname">Username:</label>
    <input type="text" id="uname" name="username" value="{{ request.user.username }}"><br><br>

    <!-- First Name -->
    <label for="fname">First Name:</label>
    <input type="text" id="fname" name="first_name" value="{{ request.user.first_name }}"><br><br>

    <!-- Last Name -->
    <label for="lname">Last Name:</label>
    <input type="text" id="lname" name="last_name" value="{{ request.user.last_name }}"><br><br>

    <!-- Email -->
    <label for="email">Email:</label>
    <input type="email" id="email" name="email" value="{{ request.user.email }}"><br><br>

    <!-- Bio -->
    <label for="bio">Bio:</label>
    <input type="text" id="bio" name="bio" value="{{ request.user.extrauserinfo.bio }}"><br><br>

    <!-- Profile Picture -->
    <label>Profile Picture:</label><br>
    {% if request.user.extrauserinfo.profile_pic  %}
    <img src="{{ request.user.extrauserinfo.profile_pic.url }}" width="100" id = "imgPreview"><br>{% endif %}
    <input type="file" id="profile_pic" name="profile_pic" accept="image/*" id = "imgInput"><br><br>

    <button type="submit">Update Profile</button>
</form>

<script>
    $("#imgInput").change(function () {
    $("#imgPreview").attr("src", URL.createObjectURL(this.files[0]));
});
</script>


{% endblock %}
